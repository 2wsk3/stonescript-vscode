---
"$schema": https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json
name: Stonescript
patterns:
  - include: "#keywords"
  - include: "#strings"
  - include: "#comments"
  - include: "#constants"
  - include: "#functions"
  - include: "#statements"
repository:
  keywords:
    patterns:
      - name: "keyword.operator.stonescript"
        match: '\\b(&|!|\\||<|>|=)\\b'

      - name: "keyword.control.stonescript"
        match: "\\b(equip|equipL|equipR|loadout)\\b"

      - name: "keyword.control.stonescript"
        match: "\\b(for|return|import|activate|enable|disable|play|>)\\b"

      - name: "keyword.control.conditional.stonescript"
        match: "[?:]"

      - name: keyword.control.ascii.stonescript
        begin: ascii
        end: asciiend
        patterns: []

  strings:
    name: string.quoted.double.stonescript
    begin: '"'
    end: '"'
    patterns: []

  comments:
    name: comment.line.double-slash.stonescript
    begin: "//"
    end: "\n"

  constants:
    patterns:
      - name: constant.language.boolean.stonescript
        match: "\\b(true|false)\\b"

      - name: constant.numeric.stonescript
        match: "[0-9]"

  functions:
    patterns:
      - name: "support.function.stonescript"
        match: "([A-Za-z_][A-Za-z0-9_]*)\\("

  statements:
    patterns:
      - match: "\\b(var)\\s+([A-Za-z_][A-Za-z0-9_]*)\\b"
        captures:
          1:
            name: "storage.type.stonescript"

      - match: "\\b(new)\\s+([A-Za-z_][A-Za-z0-9_]*)\\b"
        captures:
          1:
            name: "keyword.stonescript"

      - match: "\\b(func)\\s+([A-Za-z_][A-Za-z0-9_]*)\\s*\\(([A-Za-z0-9,\\s]*)\\)"
        captures:
          1:
            name: storage.type.function.stonescript
          2:
            name: entity.name.function.stonescript
          3:
            patterns:
              - match: "\\b[A-Za-z_][A-Za-z0-9_]*\\b"
                name: variable.parameter.stonescript

scopeName: source.txt
